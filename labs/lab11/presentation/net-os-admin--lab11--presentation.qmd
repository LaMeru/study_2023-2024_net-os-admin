---
## Author
author:
  name: Чигладзе Майя Владиславовна
  degrees: Student
  orcid: 0000-0002-0877-7063
  email: 1132239399@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 119530
      city: Москва
      address: ул. Очаковское шоссе, д. 9А
## Title
title: Лабораторная работа №11
subtitle: Администрирование сетевых подсистем
license: CC BY
date: today
date-format: "2025-10-18" # Example: 2025-09-06
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Чигладзе Майя Владиславовна  
  *  студентка  
  * направление "Прикладная информатика"  
  * Российский университет дружбы народов им. П. Лумумбы
  * [1132239399@pfur.ru](mailto:1132239399@pfur.ru)
  * <https://github.com/LaMeru/study_2023-2024_net-os-admin>

:::
::: {.column width="30%"}

![](./image/Chigladze.jpg)

:::
::::::::::::::

# Вводная часть

## Актуальность

В условиях удалённой работы и распределённых инфраструктур обеспечение безопасного доступа к серверам имеет первостепенное значение. Протокол SSH предоставляет зашифрованный канал связи, защищая данные и учетные записи от несанкционированного доступа.

## Объект исследования

•  SSH-сервер (например, OpenSSH).

•  Клиент SSH (например, `ssh`, PuTTY).

•  Конфигурационные файлы SSH-сервера и клиента.

## Цели

Приобретение практических навыков по настройке удалённого безопасного доступа к серверу с использованием протокола SSH.

## Задачи

•  Установить и настроить SSH-сервер.

•  Настроить аутентификацию по паролю и по ключу.

•  Ограничить доступ по пользователям и IP.

•  Проверить корректность и безопасность подключений.

## Материалы

•  Сервер с установленной ОС Linux.

•  Установленный пакет OpenSSH.

•  Клиенты для подключения (ssh, PuTTY, MobaXterm).

•  Конфигурационные файлы `/etc/ssh/sshd_config`, `~/.ssh/`.

•  Документация по OpenSSH.

## Методы

•  Редактирование конфигурации SSH (`/etc/ssh/sshd_config`).

•  Создание и использование пары ключей SSH.

•  Ограничение доступа (AllowUsers, ListenAddress, брандмауэр).

•  Тестирование подключений и анализ логов (`/var/log/auth.log`).

# Выполнение лабораторной работы

# Запрет удалённого доступа по SSH для пользователя root

## На сервере задайте пароль для пользователя root

![Задаем пароль](image/1.1.jpg){#fig-011 width=70%}

## В дополнительном терминале запустите мониторинг системных событий

![Запускаем мониторинг](image/1.2.jpg){#fig-012 width=70%}

## С клиента попытайтесь получить доступ к серверу через root

![Получаем доступ к серверу](image/1.3.jpg){#fig-013 width=70%}

## Откройте файл /etc/ssh/sshd_config и запретите root

![Открываем файл на редактирование](image/1.4.jpg){#fig-014 width=70%}

## Перезапустите sshd

![Перезапускаем систему](image/1.5.jpg){#fig-015 width=70%}

## Повторите попытку подключения root

![Повторяем попытку](image/1.6.jpg){#fig-016 width=70%}

# Ограничение списка пользователей для удалённого доступа по SSH

## Попытка доступа пользователя user с клиента

![Получаем доступ к серверу](image/2.1.jpg){#fig-021 width=70%}

## Откройте /etc/ssh/sshd_config и добавьте AllowUsers

![Открываем файл и добавляем строку](image/2.2.jpg){#fig-022 width=70%}

## Перезапустите sshd

![Перезапускаем систему](image/2.3.jpg){#fig-023 width=70%}

## Повторите подключение пользователя user

![Повторяем попытку получения доступа](image/2.4.jpg){#fig-024 width=70%}

# Настройка дополнительных портов для SSH

## Внесите изменения в /etc/ssh/sshd_config для дополнительных портов

![Добавляем строки](image/3.1.jpg){#fig-031 width=70%}

## Перезапустите sshd

![Перезапускаем](image/3.2.jpg){#fig-032 width=70%}

## Проверьте статус sshd

![Расширенный статус работы](image/3.3.jpg){#fig-033 width=70%}

## Исправьте метки SELinux для порта 2022

![Исправляем метки](image/3.4.jpg){#fig-034 width=70%}

## Разрешите порт 2022 в firewall

![Открываем порт](image/3.5.jpg){#fig-035 width=70%}

## Перезапустите sshd и проверьте работу обоих портов

![Перезапускаем и смотрим статус](image/3.6.jpg){#fig-036 width=70%}

## Подключитесь обычным способом и получите root

![С клиента пытаемся получить доступ к серверу](image/3.7.jpg){#fig-037 width=70%}

## Подключение через порт 2022

![Повторяем попытку](image/3.8.jpg){#fig-038 width=70%}

# Настройка удаленного доступа в SSH по ключу

## Включите аутентификацию по ключу в /etc/ssh/sshd_config

![Задаем параметр](image/4.1.jpg){#fig-041 width=70%}

## Перезапустите sshd

![Перезапускаем sshd](image/4.2.jpg){#fig-042 width=70%}

## Создайте SSH-ключ на клиенте

![Сформируйте ssh ключ](image/4.3.jpg){#fig-043 width=70%}

## Скопируйте открытый ключ на сервер

![Скопируйте открытый ключ](image/4.5.jpg){#fig-045 width=70%}

## Подключение без пароля

![Проверяем доступ без пароля](image/4.6.jpg){#fig-046 width=70%}

# Организация туннелей SSH, перенаправление TCP-портов

## Проверка TCP-служб на клиенте

![Проверяем службы TCP](image/5.1.jpg){#fig-051 width=70%}

## Создание SSH-туннеля

![Перенаправляем порт](image/5.2.jpg){#fig-052 width=70%}

## Проверка TCP-служб после туннеля

![Проверяем активные TCP службы](image/5.3.jpg){#fig-053 width=70%}

## Откройте localhost:8080 в браузере

![Открываю браузер](image/5.4.jpg){#fig-054 width=70%}

# Запуск консольных приложений через SSH

## Узнайте имя узла сервера

![Посмотрела имя узла](image/6.2.jpg){#fig-062 width=70%}

## Просмотр списка файлов

![Посмотрела список файлов](image/6.3.jpg){#fig-063 width=70%}

## Проверка почты

![Посмотрела почту](image/6.4.jpg){#fig-064 width=70%}

# Запуск графических приложений через SSH (X11Forwarding)

## Разрешение X11Forwarding на сервере

![Разрешила отображать](image/7.1.jpg){#fig-071 width=70%}

## Перезапуск sshd

![Перезапуск](image/7.2.jpg){#fig-072 width=70%}

## Подключение с клиента и запуск графического приложения

![Подключаюсь к серверу](image/7.3.jpg){#fig-073 width=70%}

# Внесение изменений в настройки внутреннего окружения виртуальной машины

## Создание структуры каталогов и копирование sshd_config

![Перехожу в каталог](image/8.1.jpg){#fig-081 width=70%}

## Создание исполняемого файла ssh.sh

![Изменяю файл](image/8.2.jpg){#fig-082 width=70%}

## Добавление вызова скрипта в Vagrantfile

![Изменяю Vagrantfile](image/8.3.jpg){#fig-083 width=70%}

# Выводы

## Выводы

В ходе выполнения лабораторной работы я получила практические навыки по настройке удалённого доступа к серверу с помощью SSH.
